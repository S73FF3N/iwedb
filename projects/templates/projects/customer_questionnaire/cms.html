{% extends "projects/customer_questionnaire/questionnaire_turbine_base.html" %}
{% load static %}
{% load i18n %}
{% load widget_tweaks %}

{% block form %}
<form action="" method="post">
    {% csrf_token %}
    {{ wizard.management_form }}
    {{ wizard.form.management_form }}
    <h2 class="text-headline">CMS System</h2>
    {% for f in wizard.form %}
        <h3 class="text-subheadline">{% trans "Turbine" %} {{ forloop.counter }}</h3>
        {{ f.id }}
        <div class="row">
            <div class="col-lg">
                <div style="border-bottom: 2px solid #092f57;margin-bottom:1.25rem; padding-bottom:0.2rem;">
                    {% render_field f.cms class="text-body" %}
                </div>
                {% if forloop.counter = 1 %}
                    <p class="help-text">{{ f.cms.help_text }}</p>
                {% endif %}
            </div>
            <div class="col-lg-9">
                {% render_field f.cms_type class="text-body" %}
                <p class="help-text">{{ f.cms_type.help_text }}</p>
            </div>
        </div>
    {% endfor %}
    {% if wizard.steps.prev %}
        <button class="text-small-uppercase" name="wizard_goto_step" type="submit" value="{{ wizard.steps.first }}" formnovalidate>{% trans "first step" %}</button>
        <button class="text-small-uppercase" name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}" formnovalidate>{% trans "prev step" %}</button>
    {% endif %}
    <input class="text-small-uppercase" id="submit" type="submit" value="{% trans 'next step' %}">
    <p></p>
    <p class="help-text"> * {% trans "indicates a required field" %} </p>
    <h3 class="text-subheadline">{% trans "Step" %} {{ wizard.steps.step1 }} {% trans "of" %} {{ wizard.steps.count }}</h3>
</form>
{% endblock %}

{% block checkbox %}
var checkboxes = document.querySelectorAll( 'input[type=checkbox]' );
for (i = 0; i < checkboxes.length; i ++) {
  var checkboxEl = checkboxes[i];
  checkboxEl.addEventListener( 'click', onClick );
  handleTextboxes(checkboxEl);
}

function onClick( ev ) {
  handleTextboxes(ev.target);
}

function handleTextboxes( checkbox ){
  var checkboxId = checkbox.id;
  var wecId = checkboxId.split("-")[1];
  var textboxId = "id_cms-" + wecId + "-cms_type";
  var textbox = document.getElementById(textboxId);
  if (checkbox.checked) {
    textbox.parentElement.style.display = "block";
  } else {
    textbox.parentElement.style.display = "none";
  }
}
{% endblock %}
