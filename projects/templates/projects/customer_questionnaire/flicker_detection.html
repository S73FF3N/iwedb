{% extends "projects/customer_questionnaire/questionnaire_turbine_base.html" %}
{% load static %}
{% load i18n %}
{% load widget_tweaks %}

{% block form %}
    <h2 class="text-headline">{% trans "Flicker Detection System" %}</h2>
    {% for f in wizard.form %}
        <h3 class="text-subheadline">{% trans "Turbine" %} {{ forloop.counter }}</h3>
        {{ f.id }}
        <div class="row">
            <div class="col-lg">
                <div style="border-bottom: 2px solid #092f57;margin-bottom:1.25rem; padding-bottom:0.2rem;">
                    {% render_field f.flicker_detection class="text-body" %}
                </div>
                {% if forloop.counter = 1 %}
                    <p class="help-text">{{ f.flicker_detection.help_text }}</p>
                {% endif %}
            </div>
            <div class="col-lg-9">
                {% render_field f.flicker_detection_type class="text-body" %}
                <p class="help-text">{{ f.flicker_detection_type.help_text }}</p>
            </div>
        </div>
    {% endfor %}
{% endblock %}

{% block checkbox %}
var checkboxes = document.querySelectorAll( 'input[type=checkbox]' );
for (i = 0; i < checkboxes.length; i ++) {
  var checkboxEl = checkboxes[i];
  checkboxEl.addEventListener( 'click', onClick );
  handleTextboxes(checkboxEl);
}

function onClick( ev ) {
  handleTextboxes(ev.target);
}

function handleTextboxes( checkbox ){
  var checkboxId = checkbox.id;
  var wecId = checkboxId.split("-")[1];
  var textboxId = "id_flicker_detection-" + wecId + "-flicker_detection_type";
  var textbox = document.getElementById(textboxId);
  if (checkbox.checked) {
    textbox.parentElement.style.display = "block";
  } else {
    textbox.parentElement.style.display = "none";
  }
}
{% endblock %}
