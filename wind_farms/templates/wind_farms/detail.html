{% extends "polls/base.html" %}
{% load static %}

{% block title %}
    {{ windfarm.name }}
{% endblock %}

{% block content %}
<div class="container">
    <div class="col-lg-12">
        <h1>{{ windfarm.name }}</h1>
        <a class="btn btn-primary pull-right" href="{% url "wind_farms:windfarm_edit" windfarm.id  %}"><i class="fa fa-edit"></i> Suggest changes</a>
    </div>
</div>
<!-- Map -->
<section id="contact" class="container map">
    <iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?q={{windfarm.latitude}},{{windfarm.longitude}}&hl=es;z=14&amp;output=embed"></iframe>
    <br />
    <small>
        <a href="https://maps.google.com/maps?q={{windfarm.position.latitude}},{{windfarm.position.longitude}}&hl=es;z=14&amp;output=embed"></a>
    </small>
</section>
<div class="container">
    <div class="col-lg-12">
        <table class="table">
            <colgroup> <col width="80"> <col width="100"> </colgroup>
            <tr>
                <th colspan="3">General</th>
            </tr>
            {% if windfarm.turbines|length > 0 %}<tr>
                <td>Turbines</td>
                <td>{{ windfarm.amount_turbines }}</td>
                <td colspan="2">{% for key, value in windfarm.get_distinct_wec_typ.items %}{{ value.0 }} x <a href="{{ value.2 }}">{{ value.1 }} {{ key }} </a>{% endfor %}</td>
            </tr>{% endif %}
            {% if windfarm.get_turbines_in_production|length > 0 %}<tr>
                <td>in production</td>
                <td colspan="2">{% for t in windfarm.get_turbines_in_production %}<a href="{{ t.get_absolute_url }}">{{ t.turbine_id }} </a>{% endfor %}</td>
            </tr>{% endif %}
            {% if windfarm.get_turbines_planned|length > 0 or windfarm.get_turbines_construction|length > 0 %}<tr>
                <td>planned/under construction</td>
                <td colspan="2">{% for t in windfarm.get_turbines_planned %}<a href="{{ t.get_absolute_url }}">{{ t.turbine_id }} </a>{% endfor %}{% for t in windfarm.get_turbines_construction %}<a href="{{ t.get_absolute_url }}"> {{ t.turbine_id }}</a>{% endfor %}</td>
            </tr>{% endif %}
            {% if windfarm.get_turbines_dismantled|length > 0 %}<tr>
                <td>dismantled</td>
                <td colspan="2">{% for t in windfarm.get_turbines_dismantled %}<a href="{{ t.get_absolute_url }}">{{ t.turbine_id }} </a>{% endfor %}</td>
            </tr>{% endif %}
            {% if windfarm.city or windfarm.country or windfarm.latitude or windfarm.longitude %}<tr>
                <td>Location</td>{% endif %}
                {% if windfarm.city or windfarm.country %}<td colspan="2">{% if windfarm.city %}{{ windfarm.city }}, {% else %}{% endif %}{% if windfarm.country %}{{ windfarm.country }}{% else %}{% endif %}</td>
            </tr>{% endif %}
            {% if windfarm.latitude or windfarm.longitude %}<tr>
                <td width="20%"></td>
                <td width="40%">latitude {% if windfarm.latitude %}{{ windfarm.latitude }}{% else %} {% endif %}</td>
                <td width="40%">longitude {% if windfarm.longitude %}{{ windfarm.longitude }}{% else %} {% endif %}</td>
            </tr>{% endif %}
            {% if windfarm.offshore %}<tr>
                <td>Offshore</td>
                <td colspan="2">{{ windfarm.offshore }}</td>
            </tr>{% endif %}
            {% if windfarm.description %}<tr>
                <td>Description</td>
                <td colspan="2">{{ windfarm.description }}</td>
            </tr>{% endif %}
            <tr>
                <th colspan="3">Time line</th>
            </tr>
        </table>
    </div>
</div>
<div class="container">
    <div class="top">
        {% for t in windfarm.turbines %}{% if t.commisioning %}<div class="top-element"><a href="{{t.get_absolute_url }}">{{ t.turbine_id }}</a><br>Comissioning:<br>{{ t.commisioning }}</div>{% endif %}{% endfor %}
  </div>

    <div class="line"></div>

  <div class="bottom">
      {% for t in windfarm.turbines %}{% if t.dismantling %}<div class="bottom-element">{{ t.turbine_id }}<br>Dismantling:<br>{{ t.dismantling }}</div>{% endif %}{% endfor %}
  </div>
</div>
{% endblock %}