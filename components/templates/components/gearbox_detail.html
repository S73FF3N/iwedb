{% extends "polls/base.html" %}
{% load static %}

{% block title %}
    {{ component.name }}
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <h1>{{ component.name }}</h1>
        <a class="btn btn-primary pull-right" href="{% url "components:component_image" component_id=component.pk component_slug=component.slug %}"><i class="fa fa-plus"></i> Add Image</a>
        <a class="btn btn-primary pull-right" href="{% url "components:gearbox_edit" component.id  %}" style="margin-right:2px"><i class="fa fa-edit"></i> Suggest changes</a>
    </div>
    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
        <div id="myCarousel" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                {% for i in component.image.all %}
                {% if i.available = True %}
                {% if forloop.counter0 = 0 %}
                    <li data-target="#myCarousel" data-slide-to="{{ forloop.counter0 }}" class="active"></li>
                {% else %}
                    <li data-target="#myCarousel" data-slide-to="{{ forloop.counter0 }}"></li>
                {% endif %}
                {% endif %}
                {% endfor %}
            </ol>
            <div class="carousel-inner" role="listbox">
                {% for i in component.image.all %}
                {% if i.available = True %}
                {% if forloop.counter0 = 0 %}
                    <div class="carousel-item active">
                {% else %}
                    <div class="carousel-item">
                {% endif %}
                    <img class="d-block img-fluid" src="{{ i.file.url }}" style="width: 100%; height:auto; margin-bottom:10px" alt="image {{ forloop.counter0 }}">
                    <div class="bottom-right">Source: {{ i.source }}</div>
                    </div>
                {% endif %}
                {% endfor %}
            </div>
            <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
        {% if component.image.all.available = True %}<p>All images are published under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons License</a>.</p>{% endif %}
    </div>
    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
        <table class="table">
            <colgroup> <col width="80"> <col width="100"> </colgroup>
            <tr>
                <th colspan="2">General</th>
            </tr>
            {% if component.manufacturer %}<tr>
                <td>Manufacturer</td>
                <td>{{ component.manufacturer }}</td>
            </tr>{% endif %}
            {% if component.compatibleWEC|length > 0 %}<tr>
                <td>Compatible to</td>
                <td>{% for wec_typ in component.compatibleWEC %}<a href="{{ wec_typ.get_absolute_url }}">{{ wec_typ }}<br></a>{% endfor %}</td>
            </tr>{% endif %}
            {% if component.weigth_t %}<tr>
                <td>Weight</td>
                <td>{{ component.weight_t }} t</td>
            </tr>{% endif %}
            <tr>
                <th colspan="2">Specific information</th>
            </tr>
            {% if component.stages %}<tr>
                <td>Stages</td>
                <td>{{ component.stages }} t</td>
            </tr>{% endif %}
            {% if component.ratio %}<tr>
                <td>Ratio</td>
                <td>1 : {{ component.ratio }}</td>
            </tr>{% endif %}
        </table>
    </div>
    </div>
</div>
{% endblock %}